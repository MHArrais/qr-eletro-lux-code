<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>EletroCodeQR</title>
  <link rel="icon" type="image/png" href="/img/codigo-qr.png" />
  <script src="https://unpkg.com/html5-qrcode"></script>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    canvas { margin: 10px auto; display: block; }
  </style>
</head>
<body>

  <hr />
  
  <h2>1️⃣ QR Code do PDF</h2>
  <input type="text" placeholder="Coloque a URL do arquivo" id="url-code" />
  <button onclick="generateQR()">Gerar QR Code</button>
  <canvas id="qrcode-canvas"></canvas>

  <hr />

  <footer style="font-weight: bold; font-style: italic; font-size: 12px;">        
        <span>Todos os difeitos reservados ©</span>
        <span>Desenvolvido por: <a href="https://mharrais.github.io/Portfolio/" id="ancor-footer" target="_blank">Márcio Henrique</a></span>
    </footer>

  <script>
    function generateQR() {
      const pdfUrl = document.getElementById("url-code").value; 
      const canvas = document.getElementById("qrcode-canvas");
      QRCode.toCanvas(canvas, pdfUrl, function (error) {
        if (error) console.error(error);
        else console.log("QR Code gerado!");
      });
    }

    function onScanSuccess(qrCodeMessage) {
      if (qrCodeMessage.endsWith(".pdf")) {
        window.location.href = "pdf-viewer.html?file=" + encodeURIComponent(qrCodeMessage);
      } else {
        alert("QR Code inválido.");
      }
    }

    new Html5Qrcode("reader").start(
      { facingMode: "environment" },
      { fps: 10, qrbox: 250 },
      onScanSuccess
    );
  </script>
</body>
</html>
